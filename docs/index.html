<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>User List</title>

  <!-- Optional: simple styling -->
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    button {
      padding: 8px 12px;
      cursor: pointer;
    }
    ul {
      margin-top: 15px;
    }
    li {
      padding: 6px 0;
    }
  </style>
</head>
<body>

  <h1>Users</h1>

  <button id="loadUsers">Load Users</button>

  <ul id="userList"></ul>

  <script>
      // const API_URL = "http://localhost:3001/users"; // local backend
      const API_BASE =
        location.hostname === "localhost"
          ? "http://localhost:3001"
          : "http://13.233.116.75:3001";


    document.getElementById("loadUsers").addEventListener("click", () => {
      fetch(`${API_BASE}/api/users`)
        .then(response => {
          if (!response.ok) {
            throw new Error("Failed to fetch users");
          }
          return response.json();
        })
        .then(users => {
          const list = document.getElementById("userList");
          list.innerHTML = "";

          console.log(users);

          users.data.forEach(user => {
            const li = document.createElement("li");
            li.textContent = `${user.name} (${user.email})`;
            list.appendChild(li);
          });
        })
        .catch(err => {
          console.error(err);
          alert("Error loading users");
        });
    });
  </script>

</body>
</html>
